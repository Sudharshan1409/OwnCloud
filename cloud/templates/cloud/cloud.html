{% extends "base.html" %}
{% load static %}
{% load extra_polls %}
{% block content %}
    <h1>Welcome to Cloud Page</h1>
    <br>
    <h4>Used {{ user.userprofile.percentage_used|rounder:"2" }}% out of 100%</h4>
    <div class="progress">
        <div class="progress-bar" role="progressbar" aria-valuenow="70"
            aria-valuemin="0" aria-valuemax="100" style="width:{{ user.userprofile.percentage_used }}%">
        </div>
    </div>
    <div class="row">
        {% if cloudfolder.parent_folder %}
            <a href="{% url 'cloud:folder' pk=cloudfolder.parent_folder.pk %}"><img src="{% static 'images/cloud/parent_folder.png' %}" style="max-width:30px;max-height:30px;" alt=""></a>
        {% else %}
            <a href="{% url 'cloud:home' %}"><img src="{% static 'images/cloud/parent_folder.png' %}" style="max-width:30px;max-height:30px;" alt=""></a>
        {% endif %}
    </div>
    <br><br><br>
    <div class="row">
        {% for folder in cloudfolder.all_folders.all %}
            <a href="{% url 'cloud:folder' pk=folder.pk %}">
                <div class="col-sm-2">
                    <div class="row">
                        <img src="{% static "images/cloud/folder.png" %}" style="max-width:100px;max-height:100px;" alt="">
                    </div>
                    <div class="row">
                        {{ folder.name }}
                    </div>
                </div>
            </a>
        {% endfor %}
    </div>
    <br><br><br>
    <div class="row">
        {% for file in cloudfolder.files.all %}
            <a href="{{file.data.url}}">
                <div class="col-sm-2">
                    <div class="row">
                        <center><img src="{% static "images/cloud/file.png" %}" style="max-width:100px;max-height:100px;" alt=""></center>
                    </div>
                    <div class="row">
                        <center>{{ file.filename }}</center>
                    </div>
                </div>
            </a>
        {% endfor %}
    </div>
    <button class="open-button" onclick="openForm()">Upload File</button>
    <button class="open-button1" onclick="openForm1()">Upload File</button>
    <div class="form-popup" id="myForm">
      <form action="{% url 'cloud:add_file' %}" method="post" class="form-container" enctype="multipart/form-data">
        <h1>Upload File</h1>
        {% csrf_token %}
        <input type="hidden" name="profile" value="{{user.userprofile.pk}}">
        <input type="hidden" name="folder" value="{{cloudfolder.pk}}">


        <label for="data"><b>File</b></label>
        <input type="file" name="data" required>
        <br>

        <button type="submit" class="btn">Upload</button>
        <button type="button" class="btn cancel" onclick="closeForm()">Close</button>
      </form>
    </div>

    <div class="form-popup1" id="myForm1">
      <form action="{% url 'cloud:add_file' %}" method="post" class="form-container" enctype="multipart/form-data">
        <h1>Upload File</h1>
        {% csrf_token %}
        <input type="hidden" name="profile" value="{{user.userprofile.pk}}">
        <input type="hidden" name="folder" value="{{cloudfolder.pk}}">


        <label for="data"><b>File</b></label>
        <input type="file" name="data" required>
        <br>
        <label for="data"><b>File</b></label>
        <input type="file" name="data" required>
        <br>

        <button type="submit" class="btn">Upload</button>
        <button type="button" class="btn cancel" onclick="closeForm1()">Close</button>
      </form>
    </div>
{% endblock %}
